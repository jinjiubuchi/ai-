<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡è„‚ç›®æ ‡åŠ©æ‰‹ | ç§‘å­¦ç˜¦èº« (AIé›†æˆç‰ˆ)</title>
    <style>
        /* CSS æ ·å¼ - å‡è„‚ä¸»é¢˜ */
        :root {
            --primary: #27ae60;
            --primary-dark: #1e8449;
            --accent: #FF9800;
            --bg: #F0F4F8;
            --card-bg: #FFFFFF;
            --text-main: #2c3e50;
            --text-sub: #7f8c8d;
            --shadow: 0 10px 20px rgba(0,0,0,0.08);
            --radius: 16px;
        }

        body { font-family: 'PingFang SC', 'Microsoft Yahei', sans-serif; background-color: var(--bg); color: var(--text-main); margin: 0; padding: 20px; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; }
        h1, h2, h3 { margin: 0; font-weight: 600; }
        .card { background: var(--card-bg); border-radius: var(--radius); padding: 25px; box-shadow: var(--shadow); margin-bottom: 30px; transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }

        /* è®¡ç®—å™¨æ ·å¼ */
        .calc-header { text-align: center; margin-bottom: 25px; }
        .calc-header h2 { color: var(--primary); margin-bottom: 8px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .gender-group { grid-column: span 2; display: flex; gap: 15px; justify-content: center; }
        .radio-label { flex: 1; text-align: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-weight: bold; color: var(--text-sub); }
        .radio-label input { display: none; }
        .radio-label:has(input:checked) { border-color: var(--primary); background-color: #e8f5e9; color: var(--primary); }
        .styled-input, .styled-select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1em; background: #fafafa; outline: none; transition: border 0.3s; }
        .full-width { grid-column: span 2; }
        .btn-calc { width: 100%; padding: 16px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border: none; border-radius: 30px; font-size: 1.1em; font-weight: bold; cursor: pointer; margin-top: 20px; box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4); transition: transform 0.2s, box-shadow 0.2s; }
        .btn-calc:active { transform: scale(0.98); }

        /* ç»“æœå±•ç¤ºæ ·å¼ */
        .result-section { display: none; text-align: center; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .calories-display { background: var(--primary); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        .big-number { font-size: 2.5em; font-weight: 800; line-height: 1.2; }
        .nutrients-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .prot-color { color: #3498db; }
        .fat-color { color: #f1c40f; }
        .carb-color { color: #e67e22; }

        /* æ¨èåˆ—è¡¨æ ·å¼ */
        .recommendation-grid { margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 15px; }
        .rec-item { background: #f9f9f9; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .rec-item strong { font-size: 1.1em; color: var(--primary-dark); }
        .rec-item span { font-weight: 600; color: var(--text-main); }

        /* AI èŠå¤©ç•Œé¢æ ·å¼ */
        .ai-chat-box { background: #ecf0f1; border-radius: 10px; padding: 15px; margin-top: 15px; }
        .ai-input-group { display: flex; gap: 10px; margin-top: 10px; }
        .ai-input { flex-grow: 1; padding: 10px; border: 1px solid #bdc3c7; border-radius: 5px; resize: none; height: 40px; }
        .btn-ai-send { padding: 10px 15px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background 0.2s; }
        .btn-ai-send:hover { background: #2980b9; }

        #aiResponse { background: var(--card-bg); padding: 12px; border-radius: 5px; border-left: 3px solid #3498db; color: var(--text-main); min-height: 40px; font-size: 0.9em; white-space: pre-wrap; }

        /* é£Ÿç‰©åˆ†ç±»å¯¼èˆªæ ·å¼ */
        .nav-wrapper { overflow-x: auto; white-space: nowrap; padding-bottom: 10px; scrollbar-width: none; }
        .food-tabs { display: inline-flex; gap: 10px; }
        .tab-btn { flex-shrink: 0; padding: 10px 20px; background: transparent; border: 2px solid #e0e0e0; border-radius: 25px; color: var(--text-sub); cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .tab-btn.active, .tab-btn:hover { border-color: var(--primary); background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3); }
        .guide-card { border-left: 5px solid var(--primary); }
        .guide-card h4 { color: var(--primary-dark); }
        .guide-card .tip { color: #c0392b; }
    </style>
</head>
<body>

<div class="container">

    <section class="card">
        <div class="calc-header">
            <h2>ğŸ”¥ å‡è„‚ç›®æ ‡è®¡ç®—å™¨</h2>
            <p>ç§‘å­¦è®¾å®šçƒ­é‡èµ¤å­—ï¼Œè¿ˆå‡ºç˜¦èº«ç¬¬ä¸€æ­¥</p>
        </div>

        <form id="calcForm" onsubmit="event.preventDefault(); showResults();">
            <div class="form-grid">
                <div class="gender-group">
                    <label class="radio-label"><input type="radio" name="gender" value="male" id="genderMale" checked><span>ğŸ‘¨ ç”·å£«</span></label>
                    <label class="radio-label"><input type="radio" name="gender" value="female" id="genderFemale"><span>ğŸ‘© å¥³å£«</span></label>
                </div>
                <div class="input-group"><label>å¹´é¾„ (å²)</label><input type="number" class="styled-input" id="ageInput" placeholder="25" required min="10"></div>
                <div class="input-group"><label>ä½“é‡ (kg)</label><input type="number" class="styled-input" id="weightInput" placeholder="70" required min="30"></div>
                <div class="input-group full-width"><label>èº«é«˜ (cm)</label><input type="number" class="styled-input" id="heightInput" placeholder="170" required min="100"></div>
                <div class="input-group full-width">
                    <label>æ—¥å¸¸æ´»åŠ¨å¼ºåº¦</label>
                    <select class="styled-select" id="activitySelect">
                        <option value="1.2">ğŸ›‹ï¸ ä¹…åä¸åŠ¨ (åŠå…¬å®¤)</option>
                        <option value="1.375">ğŸš¶â€â™‚ï¸ è½»åº¦æ´»åŠ¨ (æ¯å‘¨è¿åŠ¨1-3æ¬¡)</option>
                        <option value="1.55">ğŸƒâ€â™‚ï¸ ä¸­åº¦æ´»åŠ¨ (æ¯å‘¨è¿åŠ¨3-5æ¬¡)</option>
                        <option value="1.725">ğŸ‹ï¸â€â™‚ï¸ é«˜å¼ºåº¦æ´»åŠ¨ (æ¯å¤©è¿åŠ¨)</option>
                    </select>
                </div>
            </div>
            <button class="btn-calc" type="submit">è®¡ç®—å‡è„‚ç›®æ ‡ / START DIET</button>
        </form>
    </section>

    <section id="resultCard" class="card result-section">
        <h3>ğŸ¯ æ‚¨çš„æ¯æ—¥å‡è„‚ç›®æ ‡</h3>
        <p style="color:#666; font-size:0.9em; margin-bottom:15px;">é€šè¿‡ **çƒ­é‡èµ¤å­— 500 kcal** è¾¾åˆ°çš„ç›®æ ‡æ‘„å…¥ï¼š</p>
        
        <div class="calories-display">
            <span class="big-number" id="tdeeResult">0</span> kcal
            <div style="font-size:0.8em; opacity:0.8;">æ¯æ—¥ç›®æ ‡çƒ­é‡æ‘„å…¥</div>
        </div>
        <div class="nutrients-grid">
            <div class="nutrient-box"><span class="nutrient-val prot-color" id="proteinResult">0g</span><span class="nutrient-lbl">è›‹ç™½è´¨ (å¢è‚Œä¿è‚Œ)</span></div>
            <div class="nutrient-box"><span class="nutrient-val fat-color" id="fatResult">0g</span><span class="nutrient-lbl">è„‚è‚ª (å¿…éœ€æ‘„å…¥)</span></div>
            <div class="nutrient-box"><span class="nutrient-val carb-color" id="carbResult">0g</span><span class="nutrient-lbl">ç¢³æ°´ (æä¾›èƒ½é‡)</span></div>
        </div>
    </section>
    
    <section id="recommendationCard" class="card result-section" style="display: none;">
        <h3>ğŸ½ï¸ ä½å¡é«˜è›‹ç™½é£Ÿç‰©æ­é…ç¤ºä¾‹</h3>
        <p style="color:#666; font-size:0.9em; margin-bottom:15px;">ä»¥ä¸‹æ­é…ç¤ºä¾‹å¯å¤§è‡´æ»¡è¶³æ‚¨çš„æ¯æ—¥å®é‡è¥å…»ç´ éœ€æ±‚ï¼š</p>
        <div id="mealPlanOutput" class="recommendation-grid"></div>
    </section>

    <section id="aiCard" class="card">
        <h3>ğŸ¤– AI æ™ºèƒ½é¥®é£Ÿé¡¾é—®ï¼ˆè¿›é˜¶ï¼‰</h3>
        <p style="color:#666; font-size:0.9em; margin-bottom:15px;">è¾“å…¥æ‚¨çš„é—®é¢˜ï¼Œè·å–åŸºäºAIçš„ä¸ªæ€§åŒ–é£Ÿè°±å»ºè®®ã€‚</p>
        
        <div class="ai-chat-box">
            <div id="aiResponse">
                AI æ­£åœ¨ç­‰å¾…æ‚¨è®¡ç®—å®Œè¥å…»ç›®æ ‡åæé—®... ä¾‹å¦‚: "å¦‚ä½•ç”¨é¸¡èƒ¸è‚‰åšä½å¡åˆé¤?"
            </div>
            
            <div class="ai-input-group">
                <textarea id="aiQueryInput" class="ai-input" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..."></textarea>
                <button class="btn-ai-send" onclick="handleAIChat()">å‘é€</button>
            </div>
        </div>
    </section>

    <section class="card">
        <h3 style="margin-bottom: 15px;">ğŸ“– å‡è„‚æœŸé£Ÿç‰©é€‰æ‹©æŒ‡å—</h3>
        
        <div class="nav-wrapper">
            <div class="food-tabs">
                <button class="tab-btn active" onclick="switchTab(this, 'all')">å‡è„‚æ ¸å¿ƒ</button>
                <button class="tab-btn" onclick="switchTab(this, 'grain')">ğŸŒ¾ ç¢³æ°´é€‰æ‹©</button>
                <button class="tab-btn" onclick="switchTab(this, 'vege')">ğŸ è”¬æœçº¤ç»´</button>
                <button class="tab-btn" onclick="switchTab(this, 'meat')">ğŸ¥© è›‹ç™½è´¨æº</button>
                <button class="tab-btn" onclick="switchTab(this, 'soy')">ğŸ¥› é¥®å“ä¸é›¶é£Ÿ</button>
            </div>
        </div>
        <div id="foodContent" class="food-content-detail">
             <div class="guide-card">
                <h4>ğŸ‰ å‡è„‚æˆåŠŸçš„æ ¸å¿ƒè¦ç´ </h4>
                <p>è¯·å…ˆå®Œæˆä¸Šæ–¹è®¡ç®—ï¼Œè·å–ä¸ªæ€§åŒ–å»ºè®®ã€‚</p>
            </div>
        </div>
    </section>

</div>

<script>
    // =========================================================
    // å‡è„‚ä¸»é¢˜å¸¸é‡ä¸æ•°æ®åº“
    // =========================================================
    const CALORIE_DEFICIT = 500;
    const MACRO_SPLIT = { P: 0.35, F: 0.20, C: 0.45 }; 
    const FOOD_DATABASE = [
        { name: "é¸¡èƒ¸è‚‰ (å»çš®)", type: "protein", P: 24, F: 1.2, C: 0, Kcal: 133 },
        { name: "å¸Œè…Šé…¸å¥¶ (åŸå‘³)", type: "protein", P: 10, F: 0.5, C: 5, Kcal: 60 },
        { name: "ç½—éé±¼/å·´æ²™é±¼", type: "protein", P: 20, F: 1.5, C: 0, Kcal: 96 },
        { name: "ç‡•éº¦ç‰‡ (ä½GI)", type: "carb", P: 15, F: 6.7, C: 66.9, Kcal: 389 },
        { name: "ç³™ç±³/è—œéº¦", type: "carb", P: 7.6, F: 2.5, C: 73.7, Kcal: 368 },
        { name: "ç‰ç±³/åœŸè±† (è’¸ç…®)", type: "carb", P: 1.5, F: 0.2, C: 25, Kcal: 100 },
        { name: "ç‰›æ²¹æœ", type: "fat", P: 2, F: 15, C: 9, Kcal: 160 },
        { name: "å¥‡äºšç±½", type: "fat", P: 17, F: 31, C: 42, Kcal: 486 },
        { name: "è¥¿å…°èŠ±", type: "vegetable", P: 2.8, F: 0.4, C: 6.6, Kcal: 33 },
        { name: "è èœ", type: "vegetable", P: 2.6, F: 0.3, C: 3.2, Kcal: 23 },
    ];

    // è·å–å½“å‰è®¡ç®—ç»“æœ (ç”¨äºAIä¸Šä¸‹æ–‡)
    function getCalculatedData() {
        return {
            tdee: parseFloat(document.getElementById('tdeeResult').innerText.replace(',', '')) || 0,
            protein: parseFloat(document.getElementById('proteinResult').innerText.replace('g', '')) || 0,
            fat: parseFloat(document.getElementById('fatResult').innerText.replace('g', '')) || 0,
            carb: parseFloat(document.getElementById('carbResult').innerText.replace('g', '')) || 0,
        };
    }

    // =========================================================
    // æ ¸å¿ƒ AI æ¥å£è°ƒç”¨ (æŒ‡å‘ Vercel Serverless Function)
    // =========================================================

    function handleAIChat() {
        const queryInput = document.getElementById('aiQueryInput');
        const responseDiv = document.getElementById('aiResponse');
        const query = queryInput.value.trim();
        const calculatedData = getCalculatedData();

        if (calculatedData.tdee === 0) {
            responseDiv.innerHTML = "è¯·å…ˆè¿›è¡Œ**å‡è„‚ç›®æ ‡è®¡ç®—**ï¼ŒAIæ‰èƒ½ä¸ºæ‚¨æä¾›ä¸ªæ€§åŒ–å»ºè®®ã€‚";
            return;
        }
        if (!query) {
            responseDiv.innerHTML = "è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ã€‚";
            return;
        }

        responseDiv.innerHTML = 'æ­£åœ¨è°ƒç”¨ AI æ€è€ƒä¸­... è¯·ç¨å€™ â³';
        queryInput.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
        
        // 1. ç»„åˆä¸Šä¸‹æ–‡ä¿¡æ¯
        const contextPrompt = `
            ç”¨æˆ·æ­£åœ¨è¿›è¡Œå‡è„‚ã€‚
            æ¯æ—¥ç›®æ ‡æ‘„å…¥çƒ­é‡: ${calculatedData.tdee} kcalã€‚
            ç›®æ ‡å®é‡è¥å…»ç´ : è›‹ç™½è´¨ ${calculatedData.protein.toFixed(0)}g, è„‚è‚ª ${calculatedData.fat.toFixed(0)}g, ç¢³æ°´ ${calculatedData.carb.toFixed(0)}gã€‚
            é£Ÿç‰©åº“ä¸­çš„ä½å¡é£Ÿç‰©åŒ…æ‹¬: é¸¡èƒ¸è‚‰, ç³™ç±³, è¥¿å…°èŠ±ç­‰ã€‚
            ç”¨æˆ·æé—®: ${query}
            è¯·ç”¨ä¸­æ–‡ç®€æ´åœ°å›ç­”ï¼Œç»™å‡ºä¸“ä¸šçš„å‡è„‚å»ºè®®æˆ–é£Ÿè°±ã€‚
        `;

        // 2. è°ƒç”¨ Serverless Function (Vercel)
        const YOUR_BACKEND_ENDPOINT = "/api/ai"; // Vercel é»˜è®¤è·¯å¾„

        fetch(YOUR_BACKEND_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt: contextPrompt })
        })
        .then(response => {
            // å¦‚æœ HTTP çŠ¶æ€ç ä¸æ˜¯ 2xx (å¦‚ 404, 500)ï¼ŒæŠ›å‡ºé”™è¯¯
            if (!response.ok) {
                 return response.json().then(err => {
                    throw new Error(`HTTP Error: ${response.status} - ${err.error || 'Server Error'}`);
                 }).catch(() => {
                    // å¦‚æœæ— æ³•è§£æ JSON (å¦‚ 404/405), ä½¿ç”¨çŠ¶æ€ç 
                    throw new Error(`HTTP Error: ${response.status}. Please check Vercel Logs for api/ai.`);
                 });
            }
            return response.json();
        })
        .then(data => {
            // å‡è®¾ Serverless Function è¿”å› { text: "AIçš„å›ç­”" }
            responseDiv.innerHTML = data.text || "AIæœªè¿”å›æœ‰æ•ˆå†…å®¹ã€‚";
        })
        .catch(error => {
            console.error(error);
            // å¢å¼ºçš„é”™è¯¯æŠ¥å‘Š
            responseDiv.innerHTML = `
                âš ï¸ AI æœåŠ¡è¿æ¥å¤±è´¥ã€‚é”™è¯¯ä¿¡æ¯ï¼š${error.message}<br>
                ---
                **è¯Šæ–­æç¤ºï¼š**
                1. **404/405 é”™è¯¯:** æ£€æŸ¥ GitHub ä»“åº“ä¸­ **api/ai.js** è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚
                2. **500 é”™è¯¯ (Internal Server Error):** è¯·åœ¨ Vercel ä¸­æ£€æŸ¥ **GEMINI_API_KEY** ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®ã€‚
            `;
        });
    }

    // [å…¶ä½™çš„ JS è¾…åŠ©å‡½æ•°]

    function animateValue(id, start, end, duration) {
        const obj = document.getElementById(id);
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            let currentValue;
            if (id.includes('Result')) { 
                currentValue = (progress * (end - start) + start).toFixed(1);
            } else {
                currentValue = Math.floor(progress * (end - start) + start);
            }
            obj.innerText = currentValue.toLocaleString() + (id.includes('Result') && id !== 'tdeeResult' ? 'g' : '');
            if (progress < 1) {
                window.requestAnimationFrame(step);
            } else {
                 if (!id.includes('Result')) {
                    obj.innerText = Math.round(end).toLocaleString();
                 } else {
                    obj.innerText = end.toFixed(1) + 'g';
                 }
            }
        };
        window.requestAnimationFrame(step);
    }
    
    function showResults() {
        const age = parseFloat(document.getElementById('ageInput').value);
        const weight = parseFloat(document.getElementById('weightInput').value);
        const height = parseFloat(document.getElementById('heightInput').value);
        const activityFactor = parseFloat(document.getElementById('activitySelect').value);
        const genderMale = document.getElementById('genderMale').checked;
        
        if (isNaN(age) || isNaN(weight) || isNaN(height) || age < 10 || weight < 30 || height < 100) {
            alert("è¯·å¡«å†™æœ‰æ•ˆçš„å¹´é¾„ã€ä½“é‡å’Œèº«é«˜ä¿¡æ¯ï¼");
            return;
        }

        let BMR;
        if (genderMale) {
            BMR = (10 * weight) + (6.25 * height) - (5 * age) + 5;
        } else {
            BMR = (10 * weight) + (6.25 * height) - (5 * age) - 161;
        }
        
        const TDEE = BMR * activityFactor;
        const TARGET_CALORIES = TDEE - CALORIE_DEFICIT;

        const proteinCal = TARGET_CALORIES * MACRO_SPLIT.P;
        const proteinGrams = proteinCal / 4;
        const fatCal = TARGET_CALORIES * MACRO_SPLIT.F;
        const fatGrams = fatCal / 9;
        const carbCal = TARGET_CALORIES * MACRO_SPLIT.C;
        const carbGrams = carbCal / 4;

        const resultCard = document.getElementById('resultCard');
        const recommendationCard = document.getElementById('recommendationCard');
        resultCard.style.display = 'block';
        recommendationCard.style.display = 'block';
        resultCard.scrollIntoView({ behavior: 'smooth' });

        animateValue('tdeeResult', 0, TARGET_CALORIES, 1500);
        animateValue('proteinResult', 0, proteinGrams, 1500);
        animateValue('fatResult', 0, fatGrams, 1500);
        animateValue('carbResult', 0, carbGrams, 1500);
        
        generateMealPlan({ P: proteinGrams, F: fatGrams, C: carbGrams });
    }

    function generateMealPlan(targets) {
        const outputDiv = document.getElementById('mealPlanOutput');
        outputDiv.innerHTML = '';
        let planHtml = '';

        const leanProtein = FOOD_DATABASE.find(f => f.name.includes("é¸¡èƒ¸è‚‰"));
        const targetProteinGrams = targets.P * 0.6;
        const chickenServingGrams = (targetProteinGrams / leanProtein.P) * 100;

        planHtml += `<div class="rec-item"><strong>ğŸ¥© æ ¸å¿ƒè›‹ç™½è´¨</strong><span>${leanProtein.name}</span><span>çº¦ ${Math.round(chickenServingGrams)}g</span></div>`;
        
        const wholeGrain = FOOD_DATABASE.find(f => f.name.includes("ç³™ç±³"));
        const targetCarbGrams = targets.C * 0.4;
        const riceServingGrams = (targetCarbGrams / wholeGrain.C) * 100;
        
        planHtml += `<div class="rec-item"><strong>ğŸš æ ¸å¿ƒç¢³æ°´</strong><span>${wholeGrain.name}</span><span>çº¦ ${Math.round(riceServingGrams)}g (ç”Ÿé‡)</span></div>`;
        
        const healthyFat = FOOD_DATABASE.find(f => f.name.includes("å¥‡äºšç±½"));
        const targetFatGrams = targets.F * 0.15;
        const seedServingGrams = (targetFatGrams / healthyFat.F) * 100;

        planHtml += `<div class="rec-item"><strong>ğŸ¥‘ å¥åº·è„‚è‚ª</strong><span>${healthyFat.name}</span><span>çº¦ ${Math.round(seedServingGrams)}g</span></div>`;

        planHtml += `<div class="rec-item"><strong>ğŸ¥¦ çº¤ç»´ä¸é¥±è…¹æ„Ÿ</strong><span>${FOOD_DATABASE.find(f => f.type === "vegetable").name}</span><span>æ¯å¤© 500g ä»¥ä¸Š</span></div>`;
        planHtml += `<div class="rec-item"><strong>ğŸ’§ æ°´åˆ†æ‘„å…¥</strong><span>çº¯å‡€æ°´/é»‘å’–å•¡</span><span>ä¿æŒæ¯å¤© 2500ml+</span></div>`;
        
        outputDiv.innerHTML = planHtml;
    }

    function switchTab(btn, category) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        const content = document.getElementById('foodContent');
        const textMap = {
            'all': `<div class="guide-card"><h4>ğŸ”¥ å‡è„‚æˆåŠŸçš„æ ¸å¿ƒè¦ç´ </h4><ul><li>**çƒ­é‡èµ¤å­—ï¼š** æ‘„å…¥ < æ¶ˆè€—ï¼Œæ˜¯ç˜¦èº«çš„å”¯ä¸€é€”å¾„ã€‚</li><li>**é«˜è›‹ç™½ï¼š** ä¿æŠ¤è‚Œè‚‰ï¼Œå¢åŠ é¥±è…¹æ„Ÿã€‚</li><li>**å¤åˆç¢³æ°´ï¼š** é€‰æ‹©ä½GIé£Ÿç‰©ï¼Œä¿æŒè¡€ç³–ç¨³å®šã€‚</li><li>**è¶³é‡é¥®æ°´ï¼š** æœ‰åŠ©ä»£è°¢å’Œæ’æ¯’ã€‚</li></ul><p class="tip">ğŸš¨ **ä¸¥ç¦ï¼š** ä»»ä½•å½¢å¼çš„é¥¥é¥¿èŠ‚é£Ÿï¼</p></div>`,
            'grain': `<div class="guide-card"><h4>ğŸŒ¾ ç¢³æ°´é€‰æ‹©ï¼šä½GIï¼Œé«˜çº¤ç»´</h4><ul><li>**æ¨èï¼š** ç³™ç±³ã€è—œéº¦ã€ç‡•éº¦ç‰‡ã€å…¨éº¦é¢åŒ…ã€‚</li><li>**ä¸»é£Ÿä»½é‡ï¼š** ä¸¥æ ¼æŒ‰ç…§è®¡ç®—å™¨ç»™å‡ºçš„ç¢³æ°´ç›®æ ‡æ¥æ§åˆ¶æ€»ä»½é‡ã€‚</li><li>**é¿å…ï¼š** ç²¾åˆ¶ç™½ç±³é¥­ã€ç™½é¢æ¡ã€ç”œç‚¹ã€å«ç³–é¥®æ–™ã€‚</li></ul><p class="tip">ğŸš¨ ç¢³æ°´å¹¶éæ•Œäººï¼Œä½†å¿…é¡»æ§åˆ¶æ€»æ‘„å…¥é‡å’Œæ¥æºã€‚</p></div>`,
            'vege': `<div class="guide-card"><h4>ğŸ è”¬æœçº¤ç»´ï¼šæé«˜é¥±è…¹æ„Ÿ</h4><ul><li>**è”¬èœç›®æ ‡ï¼š** æ¯å¤© 500g ä»¥ä¸Šï¼Œå¤šåƒç»¿å¶èœå’Œåå­—èŠ±ç§‘è”¬èœã€‚</li><li>**æ°´æœï¼š** æ”¾åœ¨é¤é—´ä½œä¸ºåŠ é¤ï¼Œé€‰æ‹©ä½ç³–åˆ†æ°´æœï¼ˆå¦‚è“æœã€ç•ªèŒ„ï¼‰ã€‚</li><li>**ä¼˜åŠ¿ï¼š** è”¬èœå¡è·¯é‡Œå¯†åº¦æä½ï¼Œå¯ä»¥å¤§é‡é£Ÿç”¨å¢åŠ é¥±è…¹æ„Ÿã€‚</li></ul><p class="tip">ğŸš¨ æœæ±ã€æœå¹²å’Œè–¯æ¡ç­‰åŠ å·¥è”¬èœï¼Œåº”å®Œå…¨ç¦æ­¢ã€‚</p></div>`,
            'meat': `<div class="guide-card"><h4>ğŸ¥© è›‹ç™½è´¨æºï¼šä¿æŠ¤è‚Œè‚‰ä¸æµå¤±</h4><ul><li>**é¦–é€‰ï¼š** é¸¡èƒ¸è‚‰ã€é±¼è™¾ã€é¸¡è›‹æ¸…ã€ç˜¦ç‰›è‚‰ã€‚</li><li>**çƒ¹é¥ªæ–¹å¼ï¼š** è’¸ã€ç…®ã€çƒ¤ï¼ˆé¿å…æ²¹ç‚¸å’Œå¤§é‡ç”¨æ²¹ï¼‰ã€‚</li><li>**æ‘„å…¥é‡è¦æ€§ï¼š** è›‹ç™½è´¨æ˜¯å‡è„‚æœŸæœ€å…³é”®çš„è¥å…»ç´ ï¼Œå¿…é¡»è¾¾æ ‡ã€‚</li></ul><p class="tip">ğŸš¨ è‚¥è‚‰ã€å¸¦çš®ç¦½è‚‰ã€åŠ å·¥è‚‰åˆ¶å“ï¼ˆé¦™è‚ ï¼‰åº”é¿å…ã€‚</p></div>`,
            'soy': `<div class="guide-card"><h4>ğŸ¥› é¥®å“ä¸é›¶é£Ÿï¼šéšå½¢çƒ­é‡æ€æ‰‹</h4><ul><li>**é¥®å“ï¼š** ç™½æ°´ã€é»‘å’–å•¡ã€æ— ç³–èŒ¶æ˜¯æœ€ä½³é€‰æ‹©ã€‚</li><li>**é›¶é£Ÿï¼š** å°‘é‡åŸå‘³åšæœï¼ˆä¸è¶…è¿‡ä¸€å°æŠŠï¼‰ã€å¸Œè…Šé…¸å¥¶ï¼ˆåŸå‘³ï¼‰ã€‚</li><li>**é¿å…ï¼š** å¥¶èŒ¶ã€ç¢³é…¸é¥®æ–™ã€é«˜ç³–åˆ†æœæ±ã€é¥¼å¹²ã€ç³•ç‚¹ã€‚</li></ul><p class="tip">ğŸš¨ æ¶²ä½“å¡è·¯é‡Œæœ€å®¹æ˜“è¢«å¿½ç•¥ï¼Œè¿œç¦»æ‰€æœ‰å«ç³–é¥®æ–™ã€‚</p></div>`
        };
        
        content.innerHTML = textMap[category];
    }

    document.addEventListener('DOMContentLoaded', () => {
        const defaultTabButton = document.querySelector('.food-tabs .tab-btn.active');
        if (defaultTabButton) {
            defaultTabButton.click();
        }
    });
</script>

</body>
</html>
